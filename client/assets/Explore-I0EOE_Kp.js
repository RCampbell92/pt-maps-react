import{r as o,u as w,j as i,w as k,c as D}from"./chunk-PVWAREVJ-BBtH3yxJ.js";import"./client-CrJs2Uly.js";/* empty css            */import{S as I}from"./SubTitle-CEh91Lvc.js";const $=({children:s,position:l,className:u})=>{const[g,e]=o.useState(0),[p,t]=o.useState(0),[c,n]=o.useState(0);let d=w();const a=()=>{l=="tl"?(e(0),t(0)):l=="t"?(e(50),t(0)):l=="tr"?(e(100),t(0)):l=="l"?(e(0),t(50)):l=="c"?(e(50),t(50)):l=="r"?(e(100),t(50)):l=="bl"?(e(0),t(100)):l=="b"?(e(50),t(100)):l=="br"&&(e(100),t(100))};o.useEffect(()=>a());const S={left:`calc(${g}%)`,top:`calc(${p}%)`,translate:"calc(-50%) calc(-50%)"};return i.jsx("div",{onClick:()=>{n(c+1),d("/home/explore/"+(s==null?void 0:s.toLocaleString().replace(" ","-")))},className:"explore-btn "+u,style:S,children:s})},L=({position:s,col:l,lineNo:u})=>{const[g,e]=o.useState(0),[p,t]=o.useState(0),[c,n]=o.useState(0),[d,a]=o.useState(0),[S,m]=o.useState(0),[y,j]=o.useState(60),[b,x]=o.useState("var(--primary-colour)"),E=()=>{s=="tl"?(e(25+c),t(25-d),m(-45),j(69)):s=="t"?(e(50+c*1.5),t(25),m(0)):s=="tr"?(e(75+c),t(25+d),m(45),j(69)):s=="l"?(e(25),t(50-d*1.5),m(90)):s=="r"?(e(75),t(50+d*1.5),m(90)):s=="bl"?(e(25-c),t(75-d),m(45),j(69)):s=="b"?(e(50-c*1.5),t(75),m(0)):s=="br"&&(e(75-c),t(75+d),m(-45),j(69))},r=()=>{u==1?(n(-1),a(-1)):u==2?(n(1),a(1)):u==3?(n(-2),a(-2)):u==4?(n(2),a(2)):u==5?(n(-3),a(-3)):u==6?(n(3),a(3)):u==7?(n(-4),a(-4)):u==8?(n(4),a(4)):u==9?(n(-5),a(-5)):u==10&&(n(5),a(5))},f=()=>{l=="v"?x("var(--primary-colour)"):l=="y"?x("var(--secondary-colour)"):l=="g"?x("green"):l=="r"?x("red"):l=="b"?x("blue"):l=="c"?x("cyan"):l=="p"&&x("pink")};o.useEffect(()=>{r(),E(),f()});const h={backgroundColor:b,left:`calc(${g}%)`,top:`calc(${p}%)`,height:`calc(${y}%)`,translate:"calc(-50%) calc(-50%)",transform:`rotate(${S}deg)`};return i.jsx("div",{className:"explore-line",style:h})},B=({stationInfo:s})=>{const[l,u]=o.useState([]),e=(p=>{const t=[],c=p.split(" ");for(let n=1;n<c.length;n++){let d=c[n].trim();if(d.startsWith("time:"))console.log("time");else if(d!=""){let a=d.split(":");console.log(a[2]),a.length==3?t.push({id:n,name:a[0].replace("-"," "),dir:a[1].trim(),colours:a[2].split(",")}):a.length==2&&t.push({id:n,name:a[0].replace("-"," "),dir:a[1].trim(),colours:["v"]})}}return t})(s);return i.jsx("div",{children:i.jsxs("div",{id:"explore-container",className:"explore-container",children:[i.jsx($,{className:"explore-btn-focus",position:"c",children:s.split(" ")[0].replace("-"," ")}),e.map(p=>i.jsxs("div",{children:[i.jsx($,{position:p.dir,children:p.name}),p.colours.map(t=>i.jsx(L,{position:p.dir,col:t,lineNo:p.colours.indexOf(t)}))]},p.name))]})})},O=()=>{const{currentStation:s}=D(),l=o.useRef(null),[u,g]=o.useState(""),[e,p]=o.useState("Southern-Cross"),[t,c]=o.useState(!1),[n,d]=o.useState([""]),[a,S]=o.useState(""),[m,y]=o.useState(3),[j,b]=o.useState(0);let x=w();const E=(r,f)=>{let h="";return r&&f.forEach(v=>{v.trim().startsWith("//")||v.trim().split(" ")[0]==r&&(console.log("Line found: "+r),h=v)}),console.log("station data: "+h),h};return o.useEffect(()=>{fetch("/stations-vic.sl?nocache="+Date.now()).then(f=>f.text()).then(f=>{g(f);let h=f.split(`
`);p(E(s,h)),console.log("stationInfo: "+e)}).catch(f=>console.error("Error reading file: ",f)),l.current&&l.current.scrollIntoView({behavior:"auto"});async function r(){try{(await fetch(`/stations/images/vic/${s==null?void 0:s.toLowerCase()}.jpg`,{method:"HEAD"})).ok?c(!0):c(!1)}catch(f){console.error("Error checking image existence",f),c(!1)}}r()},[s]),o.useEffect(()=>{e.split(" ")[1]&&(e.split(" ")[1].startsWith("time:")?y(parseInt(e.split(" ")[1].split(":")[1])):y(-1))},[e]),o.useEffect(()=>{fetch("/stations-vic.sl?nocache="+Date.now()).then(r=>r.text()).then(r=>{g(r);let f=r.split(`
`),h=[];f.forEach(v=>{let C=v.split(" ")[0].replace("-"," ");C.trim()!="//"&&C.trim()!=""&&h.push(C)}),d(h)}).catch(r=>console.error("Error reading file: ",r))},[]),i.jsxs("div",{className:"page explore",id:"explore",children:[i.jsx("div",{children:i.jsx(I,{children:"Explore"})}),i.jsxs("div",{className:"station-jump",ref:l,children:[i.jsx("input",{type:"text",list:"stations-list",placeholder:"Jump to station...",value:a,onChange:r=>{S(r.target.value)}}),i.jsx("datalist",{id:"stations-list",children:n.map(r=>i.jsx("option",{value:r}))}),i.jsx("button",{onClick:()=>{console.log(a),x("/home/explore/"+a.replace(" ","-"))},children:"Go"})]}),i.jsxs("div",{className:"explore-outer-container",children:[i.jsxs("div",{className:"explore-station-info",children:[i.jsx("h1",{children:e.split(" ")[0].replace("-"," ")}),t&&i.jsx("img",{src:`/stations/images/vic/${s==null?void 0:s.toLowerCase()}.jpg`}),m>=0&&i.jsxs("p",{children:["Time to Southern Cross (by 8:30am): ",m," min"]})]}),i.jsx(B,{stationInfo:e})]})]},s)},W=k(O);export{W as default};
